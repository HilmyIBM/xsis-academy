<!DOCTYPE html>
<html lang="en" 
layout:decorate="~{fragments/layout}">
<head>
    <title>Customer</title>
</head>
<body>
    <div layout:fragment="content">
        <style>
            nav{
                background-color: #6C757D;
                color: white;
            }
        </style>
        <h1>Home Customer</h1>
        <div class="d-flex justify-content-between">
          <button
            class="btn btn-success"
            type="button"
            id="btnAdd"
            data-bs-toggle="modal"
            data-bs-target="#staticModal"
          >
            <i class="fas fa-plus"></i>&nbsp;&nbsp;Add
          </button>
          <form class="input-group w-25">
            <input
              th:if="${filter != null and !filter.isEmpty()}"
              th:value="${filter}"
              name="filter"
              type="text"
              class="form-control"
              placeholder="Cari User"
            />
            <input
              th:unless="${filter != null and !filter.isEmpty()}"
              name="filter"
              type="text"
              class="form-control"
              placeholder="Cari User"
            />
            <button type="submit" class="input-group-text" title="Filter">
              <i class="fas fa-filter"></i>
            </button>
          </form>
        </div>
        <hr style="opacity: 1;">
        <div>
            <table class="table table-bordered mt-2 table-hover border-white" id="tblCustomer">
              <thead>
                <tr>
                  <th class="col-1 text-center">Id</th>
                  <th class="col-2 text-center">Nama user</th>
                  <th class="col-2 text-center">Email</th>
                  <th class="col-3 text-center">Address</th>
                  <th class="col-2 text-center">phone</th>
                  <th class="col-1 text-center">role</th>
                  <th class="col-1 text-center">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr th:each="item:${customer}">
                  <td th:text="${item.id}" class="text-center">1</td>
                  <td th:text="${item.name}" class="text-center">Bread</td>
                  <td th:text="${item.email}" class="text-center">Appetizer</td>
                  <td th:text="${item.address}" class="text-center">Appetizer</td>
                  <td th:text="${item.phone}" class="text-center">Appetizer</td>
                  <div th:switch="${item.roleId}">
                    <td th:case="1" class="text-center">Admin</td>
                    <td th:case="2" class="text-center">User</td>
                  </div>
                  <td>
                    <div
                      class="btn-group d-flex justify-content-center"
                      role="group"
                      aria-label="Basic mixed styles example"
                    >
                    <button th:data-id="${item.id}" type="button" class="btn btn-info" title="Edit"><i class="fas fa-edit"></i></button>
                    <button th:data-id="${item.id}" type="button" class="btn btn-warning" title="Detail"><i class="fas fa-info"></i></button>
                    <button th:data-id="${item.id}" type="button" class="btn btn-danger" title="Delete"><i class="fas fa-trash"></i></button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
        </div>
        <script>
            new DataTable('#tblCustomer');   

            $("#btnAdd").click(function (e) {
                $("#staticModalBody").load("/customer/add");
            });

            $("#tblCustomer").on("click", ".btn-info", function (e) {
              let catId = $(this).data("id");
              $("#staticModalBody").load("/customer/edit/" + catId);
              $("#staticModal").modal("show");
            });

            $("#tblCustomer").on("click", ".btn-warning", function (e) {
              let catId = $(this).data("id");

              $("#staticModalBody").load("/customer/detail/" + catId);
              $("#staticModal").modal("show");
            });

            $("#tblCustomer").on("click", ".btn-danger", function (e) {
                let catId = $(this).data("id");
                $("#staticModalBody").load("/customer/delete/" + catId);
                $("#staticModal").modal("show");
            });
        </script>
    </div>
</body>
</html>