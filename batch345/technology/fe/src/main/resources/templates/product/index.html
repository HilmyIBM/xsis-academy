<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragments/layout}">
	<head>
		<title>Product::Index</title>
	</head>
	<body>
		<div layout:fragment="content">
			<div class="d-flex justify-content-between py-2 my-1 border-bottom">
				<div>
					<span class="h2">Product Index</span>
					<span class="align-top"><a id="btnAdd" class="btn btn-success rounded mx-1"><i class="fas fa-plus text-white"></i></a></span>
				</div>
				<div class="col-6">
					<form id="frmFilter">
						<div class="input-group">
							<input th:value="${filter}" name="filter" type="text" id="txtFilter" class="form-control" placeholder="Name or Description..." />
							<button type="submit" class="input-group-text"><i class="fas fa-filter" title="Filter by Name or Description..."></i></button>
						</div>
					</form>
				</div>
			</div>
			<div>
				<table class="table table-striped table-hover">
					<thead>
						<tr>
							<th class="d-none d-sm-table-cell col-lg-1">Image</th>
							<th class="col-sm-1 col-lg-1">ID</th>
							<th class="col-sm-7 col-lg-2">Name</th>
							<th class="col-sm-2 col-lg-2">Price</th>
							<th class="d-none d-sm-table-cell col-lg-1">Stock</th>
							<th class="d-none d-sm-table-cell col-lg-2">Variant</th>
							<th class="d-none d-sm-table-cell col-lg-2">Category</th>
							<th class="col-sm-2 col-lg-2 text-center">Action</th>
						</tr>
					</thead>
					<tbody>
						<tr th:if="${product != null}" th:each="item:${product}">
							<td class="d-none d-sm-table-cell">
								<div class="rounded">
									<img class="img-fluid" th:if="${item.image != null}"
										th:src="${imgFolder + item.image}" />
								</div>
							</td>
							<td th:text="${item.id}">1</td>
							<td th:text="${item.name}">Bubur Ayam</td>
							<td th:text="${item.price}">9999</td>
							<td th:text="${item.stock}" class="d-none d-sm-table-cell">99</td>
							<td th:text="${item.variantName}" class="d-none d-sm-table-cell">Bubur</td>
							<td th:text="${item.categoryName}" class="d-none d-sm-table-cell">Bubur</td>
							<td>
								<div class="d-flex justify-content-center">
									<div class="btn-group align-mid">
										<button th:data-id="${item.id}" class="btn btn-info" title="Details..." href="/category/1"><i class="fas fa-list-alt"></i></button>
										<button th:data-id="${item.id}" class="btn btn-primary" title="Edit..."><i class="fas fa-edit"></i></button>
										<button th:data-id="${item.id}" class="btn btn-danger" title="Delete..."><i class="fas fa-trash"></i></button>
									</div>
								</div>
							</td>
						</tr>
						<tr th:if="${errorMsg != null}">
							<td colspan="8" class="text-danger text-center fst-italic" th:text="${errorMsg}">-- No Product data available! --</td>
						</tr>					
					</tbody>
				</table>
			</div>
			
			<script>
				let prodId;

				$("#btnAdd").click(function(e) {
					// alert("Di sini!");
					$("#staticModalBodyLg").load("/product/add");
					$("#staticModalLg").modal("show");
				});

				$(".btn-primary").click(function(e) {
					prodId = $(this).data("id");

					$("#staticModalBodyLg").load("/product/edit/" + prodId);
					$("#staticModalLg").modal("show");
				});

				$(".btn-danger").click(function(e) {
					prodId = $(this).data("id");

					$("#staticModalBody").load("/product/delete/" + prodId);
					$("#staticModal").modal("show");
				});
			</script>
		</div>
	</body>
</html>