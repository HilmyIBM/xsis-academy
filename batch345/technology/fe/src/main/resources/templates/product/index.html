<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{fragments/layout}">
<head>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=h1, initial-scale=1.0">
    <title>Product List</title>
    <!-- <link rel="stylesheet" href="https://cdn.datatables.net/2.2.1/css/dataTables.jqueryui.min.css">
    <script src="https://cdn.datatables.net/2.2.1/js/dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/2.2.1/js/dataTables.jqueryui.min.js"></script> -->
</head>
<body>
    <div layout:fragment="content" class="bg-light p-3">
        <H2>Product List</H2>
        <button 
        type="button" 
        class="btn" 
        style="background-color: purple; color: white;" 
        data-bs-toggle="modal" 
        data-bs-target="#staticModal"
        id="btnAdd">Add</button>
        <div class="p-3 bg-white">
            <div class="d-flex justify-content-between mb-3 w-100">
                <div class="d-flex align-items-center gap-3">
                    <p class="m-0">show</p>
                    <div class="">
                        <div class="dropdown">
                            <button class="btn btn-outline-secondary rounded-0 pe-5" type="button" id="dropdownShowMenu" data-bs-toggle="dropdown" aria-expanded="false">
                              10
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownShowMenu">
                              <li><a class="dropdown-item" href="#">20</a></li>
                              <li><a class="dropdown-item" href="#">40</a></li>
                              <li><a class="dropdown-item" href="#">All</a></li>
                            </ul>
                        </div>
                    </div>
                    <p class="m-0">Entries</p>
                </div>
                <div class="gap-3 d-flex align-items-center">
                    <form id="formFilter">
                        <div class="input-group align-items-center">
                            <label for="search" class="me-3">Search</label>
                            <input
                                th:if="${filter!=null}"
                                name="filter"
                                type="text"
                                id="txtFilter"
                                class="form-control"
                                placeholder="Cari..."
                                th:value="${filter}"
                            />
                            <input
                                th:unless="${filter!=null}"
                                name="filter"
                                type="text"
                                id="txtFilter"
                                class="form-control"
                                placeholder="Cari..."
                            />
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="d-flex justify-content-center">
                <table class="table table-striped table-hover w-75">
                    <thead>
                        <tr class="text-center">
                            <td scope="col" class="text-primary">image</td>
                            <td scope="col" class="text-primary">id</td>
                            <td scope="col" class="text-primary">nama product</td>
                            <td scope="col">category</td>
                            <td scope="col">variant</td>
                            <td scope="col">price</td>
                            <td scope="col">stock</td>
                            <td scope="col">is delete</td>
                            <td scope="col">action</td>
                        </tr>
                    </thead>
                    <tbody class="" style="border-top: white;" th:if="${product!=null}">
                      <tr th:each="item:${[product]}" class="text-center align-middle">
                            <td class="ratio ratio-1x1 text-center" style="width: 70px;">
                                <!-- <img th:src="@{'lib/images/' + ${item.image}}" th:alt="${item.name}" class="img-thumbnail rounded-circle w-75 h-75"> -->
                                <img th:if="${item.image} != null" th:src="@{'lib/images/' + ${item.image}}" class="img-thumbnail rounded-circle w-75 h-75">
                                <i th:unless="${item.image} != null" class="fas fa-image fa-2x"></i>
                            </td>
                            <td scope="row" th:text="${item.id}">id</td>
                            <td th:text="${item.name}">nama product</td>
                            <!-- <td th:text="${item.price}">category</td>  -->
                            <td scope="row" th:text="${item.categoryName}">category</td>
                            <td scope="row" th:text="${item.variantName}">variant</td>
                            <td scope="row" th:text="${item.price}">price</td>
                            <td scope="row" th:text="${item.stock}">stock</td>
                            <td scope="row" th:text="${item.deleted}">is delete</td>
                            <!-- <td th:text="${item.categoryId}"></td>-->
                            <td class="">
                                <div class="">
                                    <button th:data-id="${item.id}" type="button" title="edit" class="btn btn-success text-dark">Edit</button>
                                    <button th:data-id="${item.id}" type="button" id= "btnDelete" title="delete" class="btn btn-danger text-light">Delete</button>
                                    <button th:data-id="${item.id}" type="button" id="btnDetail" title="detail" class="btn btn-warning text-light">Detail</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="d-flex justify-content-between">
                <div>
                    <p class="m-0">Page 1 of 2</p>
                </div>
                <div>
                    <button type="button" class="btn btn-primary disabled">Previous</button>
                    <button type="button" class="btn btn-primary">Next</button>
                </div>
            </div>
        </div>
        <script>
            $("#btnAdd").click(function(e){
                $("#staticModalBody").load("/product/add");
            });
            $(".btn-success").click(function(e){
                let varID = $(this).data("id");
                $("#staticModalBody").load("/product/edit/" + varID);
                $("#staticModal").modal("show");
            });
            $(".btn-danger").click(function(e){
                let varID = $(this).data("id");
                $("#staticModalBody").load("/product/delete/" + varID);
                $("#staticModal").modal("show");
            });
            $(".btn-warning").click(function(e){
                let varID = $(this).data("id");
                $("#staticModalBody").load("/product/" + varID);
                $("#staticModal").modal("show");
            });
        </script>
    </div>
</body>
</html>